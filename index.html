<!DOCTYPE html>
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<title>在线极点五笔输入法</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>

	<SCRIPT language=JavaScript src="library/freeime4.js" type="text/javascript"></SCRIPT>
	<SCRIPT language=JavaScript src="library/core.js" type="text/javascript"></SCRIPT>
	<SCRIPT language=JavaScript src="library/index.js"></SCRIPT>  <!-- this will trigger an `Uncaught ReferenceError: module is not defined`, which can be safely ignored -->
	<link rel="stylesheet" type="text/css" href="library/index.css">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>input and textarea caret-position testing ground</title>
		
		
<style type="text/css"> 
	#loadDiv { 
		position:absolute; 
		z-index:999; 
		height:20px; 
		background-color:#FFFFFF; 
		text-align:center; 
		 left:532px;
		top:300px;
	} 
	.ui-keyboard-radio{
		vertical-align: middle;
	}
	.ui-keyboard-label{
		vertical-align: middle;
	}

.ui-keyboard-button {
	border: 1px solid #aaa;
	padding: 0 0.4em;
	margin: 1px;
	margin-bottom: 5px;
	min-width: 2.8em;
	height: 2.4em;
	line-height: 2.2em; 
		font-size: 12px;
	vertical-align: top;
	font-family: Helvetica, Arial, sans-serif;
	font-weight:bold;

	color: #333;
	text-align: center;
	border-radius: 5px;
	-webkit-box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, 0.5);
	box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, 0.5);
	background: white;
	background-image: -webkit-linear-gradient(-90deg, white 0%, #e3e3e3 100%);
	background-image:         linear-gradient(-90deg, white 0%, #e3e3e3 100%);
	cursor: pointer;
	overflow: hidden;
	-moz-user-focus: ignore;
}

.ui-keyboard-button_on {
	border: 1px solid #aaa;
	padding: 0 0.5em;
	margin: 1px;
	margin-bottom: 5px;
	min-width: 2em;
	height: 2em;
	line-height: 2em; 
		font-size: 12px;
	vertical-align: top;
	font-family: Helvetica, Arial, sans-serif;
	font-weight:bold;
	color: #FF0000;
	text-align: center;
	border-radius: 5px;
	-webkit-box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, 0.5);
	box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, 0.5);
	background: white;
	background-image: -webkit-linear-gradient(-90deg, white 0%, #e3e3e3 100%);
	background-image:         linear-gradient(-90deg, white 0%, #e3e3e3 100%);
	cursor: pointer;
	overflow: hidden;
	-moz-user-focus: ignore;
}


	body,td,th {
		font-size: 12px;
	}
	body {
		margin-top: 0px;
		margin-bottom: 0px;
		margin-left: 0px;
		margin-right: 0px;
	}
	a:link {
		color: #333333;
		text-decoration: none;
	}
	a:visited {
		text-decoration: none;
		color: #333333;
	}
	a:hover {
		text-decoration: none;
		color: #FF0000;
	}
	a:active {
		text-decoration: none;
		color: #333333;
	}
	A {
		TEXT-DECORATION: none
	}
	A:link {
		FONT-SIZE: 12px; COLOR: #333333
	}
	A:visited {
		FONT-SIZE: 12px; COLOR: #333333
	}
	A:hover {
		FONT-SIZE: 12px; COLOR: #ff0000
	}
	A:active {
		FONT-SIZE: 12px; COLOR: #ff0000
	}

	.top_td3 {
		line-height: 20px;
		font-size: 12px;
		color: #333333;
	}
	.active {  /** it decided the background color of the link which is openning the current windows, by Andy*/
		text-decoration: none;
		color: #FF0000;
		 background-color: #00FF00;
	}


</style> 
<!--<div id="loadDiv"><img src="jidianpinyinwb2/LoadingBar.gif"> Loading...</div> -->



<script language="JavaScript">
	var myGlobalVariable_copy;
	var clipboarddata;

	var currentCaretPosition;
		/** bolow code comes from https://stackoverflow.com/questions/2397370/change-link-color-of-the-current-page-with-css*/
		$(document).ready(function() {
			$("[href]").each(function() {
			if (this.href == window.location.href) {
					$(this).addClass("active");
					
				}
			});
			
			});
		
	$().ready(function() {
		$('#btn').click(function() {
			$('textarea').each(function() {
				if ($(this).attr('readonly')) {
					$(this).removeAttr('readonly');
					document.getElementById("btn").className = 'ui-keyboard-button';
					document.getElementById("btn").setAttribute("value", "Turn off Android Keybaord and Cursor");
					document.form1.edit_area.focus();
				}
				else {
					$(this).attr({
						'readonly': 'readonly'
					});
					document.getElementById("btn").className = 'ui-keyboard-button_on';
					document.getElementById("btn").setAttribute("value", "Turn on Android Keybaord and Cursor");
					document.form1.edit_area.focus();
				}
			});
		});
		
		
		var ua = navigator.userAgent.toLowerCase();
		var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
		if(isAndroid) {
		// window.alert("Attention: android");
		 
		 if(navigator.userAgent.indexOf("Firefox") != -1 ) {
					//alert("firefox in android");
				$(document.getElementById("editor_text_area_id")).removeClass("editor_text_area").addClass("editor_text_area_android_firefox");
				$(document.getElementById("virtual_keyboard_id")).removeClass("virtual_keyboard").addClass("virtual_keyboard_android");	
				$(document.getElementById("keyboard_table_id")).removeClass("keyboard_table").addClass("keyboard_table_android");
				$(document.getElementById("keyboard_controlList_id")).removeClass("keyboard_controlList").addClass("keyboard_controlList_android");					
				$(document.getElementById("edit_area")).removeClass("textbox").addClass("textbox_android");	
				$(document.getElementById("subject_table_id")).removeClass("subject_table").addClass("subject_table_android");	
										
				$("textarea[id=edit_area]").attr('cols','88'); 
				  //alert("firefox in android");
				$(document.getElementById("subject_title_id")).removeClass("subject_title").addClass("subject_title_android");
				$(document.getElementById("btn")).click();

			}	
			else if (navigator.userAgent.indexOf("Chrome") != -1 )
			{
			   // alert("non firefox in android");
				$(document.getElementById("editor_text_area_id")).removeClass("editor_text_area").addClass("editor_text_area_android");
				$(document.getElementById("subject_title_id")).removeClass("subject_title").addClass("subject_title_android");
				$(document.getElementById("virtual_keyboard_id")).removeClass("virtual_keyboard").addClass("virtual_keyboard_android");
	$(document.getElementById("keyboard_controlList_id")).removeClass("keyboard_controlList").addClass("keyboard_controlList_android");	
				$(document.getElementById("edit_area")).removeClass("textbox").addClass("textbox_android");	
				$(document.getElementById("subject_table_id")).removeClass("subject_table").addClass("subject_table_android");		
				
				$(document.getElementById("btn")).click();
				//document.getElementById('editor_text_area_id').className = 'editor_text_area_android';	
			
			}
			else{
				//alert("non firefox and non Chrome in android");
			}

		}


	if(navigator.userAgent.indexOf("Chrome") != -1 ){	//judge whether it is chrome or not
		document.addEventListener("copy", () => {
		  var text = window.getSelection().toString();
		//  alert("copying text: " + text);
		  myGlobalVariable_copy=text;
		});
		
		
		$("#edit_area").on("paste",function(event){
			  event.preventDefault();
			  var clipboarddata =  window.event.clipboardData.getData('text');    
			  console.log("paste value" + clipboarddata);// alert(clipboarddata);
			 
		  
			  myGlobalVariable_copy=clipboarddata; //put clipboard data into global variable, then send code to core.js
				var x=String.fromCharCode(556);// alert(x);
		 
			document.getElementById("edit_area").focus();
			y=keyprocessing(x);
		  
		});
	}//judge whether it is chrome or not

		if(!isAndroid) { //if it is not android, it is windows.
				 if(navigator.userAgent.indexOf("Firefox") != -1 ) {
				// alert("firefox");
						$(document.getElementById("editor_text_area_id")).removeClass("editor_text_area").addClass("editor_text_area_firefox");
						$("textarea[id=edit_area]").attr('cols','120'); 
						//$(document.getElementById("subject_title_id")).removeClass("subject_title").addClass("subject_title_android");
						$(document.getElementById("btn")).click();
					//}else if (navigator.userAgent.indexOf("Safari") != -1){
					}else if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1){ //this is the correct way to detect safari not chrome.
				//alert("safari");
						$(document.getElementById("editor_text_area_id")).removeClass("editor_text_area").addClass("editor_text_area_safari");
						$("textarea[id=edit_area]").attr('cols','120'); 
								$(document.getElementById("subject_title_id")).removeClass("subject_title").addClass("subject_title_safari");	//$(document.getElementById("subject_title_id")).removeClass("subject_title").addClass("subject_title_android");
						$(document.getElementById("btn")).click();
				} 
		}	
	});

</script>
		
</head>



<body onLoad="on_load();loadDiv.style.display='none';" style="margin:0px;">
<div id="loadDiv"><img src="../images/LoadingBar.gif"> Loading...</div>

			<table width="774" align="Center"  style="BACKGROUND-COLOR: #f0f0f0">
				<tbody>
				  <tr>
					<td style="PADDING-LEFT: 8px; TEXT-ALIGN: left; font-size:14px; font-weight:bold" 
			onclick="document.form1.edit_area.focus()">Online Chinese Input：Simplified Jiandian Wubi</td>
				  </tr>
				</tbody>
			  </table>
</div> 	
<form action="../../wb/return false" method="post" name="form1" id="form1" style="FONT-SIZE: 100%" >

    <div class="editor_text_area" id="editor_text_area_id">
		  <textarea class="col" id="edit_area" name="edit_area3" rows="10" cols="102" onKeyPress="return key_press(event);" id="edit_area" onKeyDown="return key_down(event);" onKeyUp="return key_up(event);"  >
		  </textarea>
    </div>
	
 <div class="virtual_keyboard">
	<table width="780" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">

		<tr>
			<td align="center" > 
		<input type="button" class="ui-keyboard-button" id="myBtn_0" onClick="myFunctionTest(this.value)" value="0">
			<input type="button" class="ui-keyboard-button" id="myBtn_1" onClick="myFunctionTest(this.value)" value="1">
			<input type="button" class="ui-keyboard-button" id="myBtn_2" onClick="myFunctionTest(this.value)" value="2">
			<input type="button" class="ui-keyboard-button" id="myBtn_3" onClick="myFunctionTest(this.value)" value="3">
			<input type="button" class="ui-keyboard-button" id="myBtn_4" onClick="myFunctionTest(this.value)" value="4">
			<input type="button" class="ui-keyboard-button" id="myBtn_5" onClick="myFunctionTest(this.value)" value="5">
			<input type="button" class="ui-keyboard-button" id="myBtn_6" onClick="myFunctionTest(this.value)" value="6">
			<input type="button" class="ui-keyboard-button" id="myBtn_7" onClick="myFunctionTest(this.value)" value="7">
			<input type="button" class="ui-keyboard-button" id="myBtn_8" onClick="myFunctionTest(this.value)" value="8">
			<input type="button" class="ui-keyboard-button" id="myBtn_9" onClick="myFunctionTest(this.value)" value="9">
			<input type="button" class="ui-keyboard-button" id="myBtn_coma" onClick="myFunctionTest(this.value)" value=",">
			<input type="button" class="ui-keyboard-button" id="myBtn_period" onClick="myFunctionTest(this.value)" value=".">
		<br>
			 <input type="button" class="ui-keyboard-button" id="myBtn_q" onClick="myFunctionTest(this.value)" value="q"> 
			 <input type="button" class="ui-keyboard-button" id="myBtn_w" onClick="myFunctionTest(this.value)" value="w">
			 <input type="button" class="ui-keyboard-button" id="myBtn_e" onClick="myFunctionTest(this.value)" value="e">
			 <input type="button" class="ui-keyboard-button" id="myBtn_r" onClick="myFunctionTest(this.value)" value="r">
			 <input type="button" class="ui-keyboard-button" id="myBtn_t" onClick="myFunctionTest(this.value)" value="t">
			 <input type="button" class="ui-keyboard-button" id="myBtn_y" onClick="myFunctionTest(this.value)" value="y">
			 <input type="button" class="ui-keyboard-button" id="myBtn_u" onClick="myFunctionTest(this.value)" value="u">
			 <input type="button" class="ui-keyboard-button" id="myBtn_i" onClick="myFunctionTest(this.value)" value="i">
			 <input type="button" class="ui-keyboard-button" id="myBtn_o" onClick="myFunctionTest(this.value)" value="o">
			 <input type="button" class="ui-keyboard-button" id="myBtn_p" onClick="myFunctionTest(this.value)" value="p">
			 <input type="button" class="ui-keyboard-button" id="myBtn_leftSquareBracket" onClick="myFunctionTest(this.value)" value="[">
			<input type="button" class="ui-keyboard-button" id="myBtn_rightSquareBracket" onClick="myFunctionTest(this.value)" value="]">
			<input type="button" class="ui-keyboard-button" id="myBtn_leftBrace" onClick="myFunctionTest(this.value)" value="{">
			<input type="button" class="ui-keyboard-button" id="myBtn_rightBrace" onClick="myFunctionTest(this.value)" value="}">
			<input type="button" class="ui-keyboard-button" id="myBtn_forwardSlash" onClick="myFunctionTest(this.value)" value="/">
			<input type="button" class="ui-keyboard-button" id="myBtn_backSlash" onClick="myFunctionTest(this.value)" value="\">
			<input type="button" class="ui-keyboard-button" id="myBtn_pipe" onClick="myFunctionTest(this.value)" value="|">
			<input type="button" class="ui-keyboard-button" id="myBtn_plus" onClick="myFunctionTest(this.value)" value="+">
			<input type="button" class="ui-keyboard-button" id="myBtn_minus" onClick="myFunctionTest(this.value)" value="-">
			<input type="button" class="ui-keyboard-button" id="myBtn_Equal" onClick="myFunctionTest(this.value)" value="=">
			 
		<br>
			<input type="button" class="ui-keyboard-button" id="myBtn_a" onClick="myFunctionTest(this.value)" value="a">
			<input type="button" class="ui-keyboard-button" id="myBtn_s" onClick="myFunctionTest(this.value)" value="s">
			<input type="button" class="ui-keyboard-button" id="myBtn_d" onClick="myFunctionTest(this.value)" value="d">
			<input type="button" class="ui-keyboard-button" id="myBtn_f" onClick="myFunctionTest(this.value)" value="f">
			<input type="button" class="ui-keyboard-button" id="myBtn_g" onClick="myFunctionTest(this.value)" value="g">
			<input type="button" class="ui-keyboard-button" id="myBtn_h" onClick="myFunctionTest(this.value)" value="h">
			<input type="button" class="ui-keyboard-button" id="myBtn_j" onClick="myFunctionTest(this.value)" value="j">
			<input type="button" class="ui-keyboard-button" id="myBtn_k" onClick="myFunctionTest(this.value)" value="k">
			<input type="button" class="ui-keyboard-button" id="myBtn_l" onClick="myFunctionTest(this.value)" value="l">
			<input type="button" class="ui-keyboard-button" id="myBtn_underScore" onClick="myFunctionTest(this.value)" value="_">
			<input type="button" class="ui-keyboard-button" id="myBtn_colon" onClick="myFunctionTest(this.value)" value=":">
			<input type="button" class="ui-keyboard-button" id="myBtn_semicolon" onClick="myFunctionTest(this.value)" value=";">
			<input type="button" class="ui-keyboard-button" id="myBtn_quotationMark" onClick="myFunctionTest(this.value)" value="&quot;">
			<input type="button" class="ui-keyboard-button" id="myBtn_leftParenteses" onClick="myFunctionTest(this.value)" value="(">
			<input type="button" class="ui-keyboard-button" id="myBtn_rightParenteses" onClick="myFunctionTest(this.value)" value=")">
			<input type="button" class="ui-keyboard-button" id="myBtn_leftAngelBracket" onClick="myFunctionTest(this.value)" value="<">
			<input type="button" class="ui-keyboard-button" id="myBtn_rightAngelBracket" onClick="myFunctionTest(this.value)" value=">">
			<input type="button" class="ui-keyboard-button" id="myBtn_apostrophe" onClick="myFunctionTest(this.value)" value="'">
			<input type="button" class="ui-keyboard-button" id="myBtn_questionMark" onClick="myFunctionTest(this.value)" value="?">
		<br>
			<input type="button" class="ui-keyboard-button" id="myBtn_z" onClick="myFunctionTest(this.value)" value="z">
			<input type="button" class="ui-keyboard-button" id="myBtn_x" onClick="myFunctionTest(this.value)" value="x">
			<input type="button" class="ui-keyboard-button" id="myBtn_c" onClick="myFunctionTest(this.value)" value="c">
			<input type="button" class="ui-keyboard-button" id="myBtn_v" onClick="myFunctionTest(this.value)" value="v">
			<input type="button" class="ui-keyboard-button" id="myBtn_b" onClick="myFunctionTest(this.value)" value="b">
			<input type="button" class="ui-keyboard-button" id="myBtn_n" onClick="myFunctionTest(this.value)" value="n">
			<input type="button" class="ui-keyboard-button" id="myBtn_m" onClick="myFunctionTest(this.value)" value="m">
			<input type="button" class="ui-keyboard-button" id="myBtn_tidle" onClick="myFunctionTest(this.value)" value="~">
			<input type="button" class="ui-keyboard-button" id="myBtn_leftQuote" onClick="myFunctionTest(this.value)" value="`">
			<input type="button" class="ui-keyboard-button" id="myBtn_exclamation" onClick="myFunctionTest(this.value)" value="!">
			<input type="button" class="ui-keyboard-button" id="myBtn_Ampersat" onClick="myFunctionTest(this.value)" value="@">
			<input type="button" class="ui-keyboard-button" id="myBtn_pound" onClick="myFunctionTest(this.value)" value="#">
			<input type="button" class="ui-keyboard-button" id="myBtn_Dollar" onClick="myFunctionTest(this.value)" value="$">
			<input type="button" class="ui-keyboard-button" id="myBtn_percent" onClick="myFunctionTest(this.value)" value="%">
			<input type="button" class="ui-keyboard-button" id="myBtn_caret" onClick="myFunctionTest(this.value)" value="^">
			<input type="button" class="ui-keyboard-button" id="myBtn_Ampersand" onClick="myFunctionTest(this.value)" value="&">
			<input type="button" class="ui-keyboard-button" id="myBtn_Asterisk" onClick="myFunctionTest(this.value)" value="*">
		<br>



		<input type="button" class="ui-keyboard-button" id="myBtn_pgdn" onClick="myFunctionpgdn()" value="PgDn">
		<input type="button" class="ui-keyboard-button" id="myBtn_pgup" onClick="myFunctionpgup()" value="PgUp">
		<!--<input type="button" class="ui-keyboard-button" id="myBtn_upperCase" onclick="myFunctionupperCase()" value="upperCase">
		<input type="button" class="ui-keyboard-button" id="myBtn_lowerCase" onclick="myFunctionlowerCase()" value="lowerCase">

		<button onclick="Backspace();">Backspace</button>
		<input type="button" class="ui-keyboard-button" id="myBtn_backspace" onclick="Backspace();" value="BackSpace">
		-->

		<input type="button" class="ui-keyboard-button" id="myBtn_space" onClick="myFunctionspace()" value="   Space   ">
		<input type="button" class="ui-keyboard-button" id="myBtn_caseChange" onClick="myFunctioncaseChange()" value="&#8679;">

		<!--<button onclick="Backspace()">Backspace</button>	if using this button, chrome will has error message not found file-->
		<input type="button" class="ui-keyboard-button" id="myBtn_backspace" onClick="myFunctionDelete();" value="BackSpace&#8656;">
		<input type="button" class="ui-keyboard-button" id="myBtn_delete" onClick="Deletex();" value="Delete">
		<input type="button" class="ui-keyboard-button" id="myBtn_enterkey" onClick="myFunctionenter();" value="&#10550;">
		<input type="button" class="ui-keyboard-button" id="myBtn_tab" onClick="myFunctiontab();" value="&#8646;">
		<input type="button" class="ui-keyboard-button" id="myBtn_copy" onClick="myFunctioncopy()" value="Copy">
		<input type="button" class="ui-keyboard-button" id="myBtn_paste" onClick="myFunctionpaste()" value="Paste">
		<input type="button" class="ui-keyboard-button" id="myBtn_clear" onClick="myFunctionclear()" value="Clear">
			
		</td>
	</tr>
			 
			<tr>
				<td>
				
					<table width="780" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC" class="STYLE3">
									<tbody bgcolor="#FFFFFF">
									  <tr>
										<td style="BACKGROUND-COLOR: #f0eff1" 
								onclick="document.form1.edit_area.focus()" width="30%"><div id="code_field" style="PADDING-LEFT: 2px; FONT-SIZE: 110%"></div></td>
										<td onClick="document.form1.edit_area.focus()" align="left">
											<label onclick="document.form1.edit_area.focus()" class="ui-keyboard-label">
											<input type="radio" checked="checked" class="ui-keyboard-radio"
									  name="ch_en_switch" />
											 Chinese</label>
											<label 
									  onclick="document.form1.edit_area.focus()" class="ui-keyboard-label"/>
												  <input onClick="clear_all();" class="ui-keyboard-radio"
									  type="radio" name="ch_en_switch" />
													English(</label>
											<label 
									  onclick="document.form1.edit_area.focus()" class="ui-keyboard-label">
												<input id="full_shape2" class="ui-keyboard-radio"
									  type="checkbox" name="full_shape" />
													全角)
											</label>
											<input type="button" class="ui-keyboard-button" id="btn" value="Turn off Android Keyboard and Cursor" 
										class="on"  />

										</td>
										<td onClick="document.form1.edit_area.focus()" align="middle"><input class="ui-keyboard-button" id="copyAll" onClick="highlight_copy();" type="button" value="Select All" name="select" />
										</td>
									  </tr>
									  <tr>
										<td colspan="3"><div id="list_area" 
								  style="PADDING-RIGHT: 2px; PADDING-LEFT: 2px; FONT-SIZE: 110%; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; BACKGROUND-COLOR: #f0eff1" 
								  onclick="document.form1.edit_area.focus()"></div></td>
									  </tr>
									</tbody>
								 

								  <div style="DISPLAY: none">
										<select id="select1" style="FONT-SIZE: 11pt" 
								onchange="disp_fuhao(this)" name="select1">
										  <option selected="selected">各类符号</option>
										</select>
										<br />
										<select id="select2" style="FONT-SIZE: 11pt" onChange="bihua(this)" 
								  name="select2">
										  <option selected="selected">笔画查字</option>
										</select>

										<input id="diji" 
								onclick="document.form1.shanchu.disabled=!this.checked;" type="checkbox" 
								name="diji" />
										Low level mode 低级模式<br />
										<input id="shanchu" onClick="document.form1.edit_area.value=document.form1.edit_area.value.replace(/==/, '');document.form1.edit_area.focus();" type="button" value="删除 == " name="shanchu" />
								  </div>
								  </td>
							  </tr>
					</table>
				</td>
			</tr>
</div>			

</form>


  
<script>

/**
$('#edit_area').keyup(function () {
    if ($(this).val().indexOf('aeu') >= 0) $(this).blur();
    $('#myBtnId').click();
});*/


function myFunctionTest(a){
//var x = document.getElementById(a).value;
var x=a;
//alert(x);
document.getElementById("edit_area").focus();
y=keyprocessing(x);
}


function myFunctionspace() {
  // var x = document.getElementById("myBtn_Z").value;
  var x=String.fromCharCode(32);
 // alert(x);
	document.getElementById("edit_area").focus();
	y=keyprocessing(x);
   // document.getElementById("edit_area").innerHTML =  document.getElementById("edit_area").innerHTML+x;
}

function myFunctionpgdn() {
  // var x = document.getElementById("myBtn_Z").value;
  var x=String.fromCharCode(501);
 // alert(x);
	document.getElementById("edit_area").focus();
	y=keyprocessing(x);
   // document.getElementById("edit_area").innerHTML =  document.getElementById("edit_area").innerHTML+x;
}


function myFunctionpgup() {
  // var x = document.getElementById("myBtn_Z").value;
  var x=String.fromCharCode(502);
 // alert(x);
	document.getElementById("edit_area").focus();
	y=keyprocessing(x);
   // document.getElementById("edit_area").innerHTML =  document.getElementById("edit_area").innerHTML+x;
}

function myFunctionDelete() {
  // var x = document.getElementById("myBtn_Z").value;
  var x=String.fromCharCode(8);
 // alert(x);
	document.getElementById("edit_area").focus();
	y=keyprocessing(x);
   // document.getElementById("edit_area").innerHTML =  document.getElementById("edit_area").innerHTML+x;
}
function myFunctionenter() {
  // var x = document.getElementById("myBtn_Z").value;
  var x=String.fromCharCode(13);
 // alert(x);
	document.getElementById("edit_area").focus();
	y=keyprocessing(x);
   // document.getElementById("edit_area").innerHTML =  document.getElementById("edit_area").innerHTML+x;
}
function myFunctiontab() {
  // var x = document.getElementById("myBtn_Z").value;
  var x=String.fromCharCode(9);
 // alert(x);
	document.getElementById("edit_area").focus();
	y=keyprocessing(x);
   // document.getElementById("edit_area").innerHTML =  document.getElementById("edit_area").innerHTML+x;
}

function myFunctioncopy() {

    var textarea = document.getElementById('edit_area');
    var currentPos = getCaret(textarea); 
    var srcTextarea = document.getElementById("edit_area");  //added by Andy 02-2019 works
    var destTextarea = getSelectedText(srcTextarea);
	//alert(destTextarea);
	
	myGlobalVariable_copy=destTextarea;
	clipboarddata=myGlobalVariable_copy;//ensure the copy button clicked, then ctrl+v can paster content coming from copy button.
	document.execCommand("Copy");
	document.getElementById("edit_area").focus();
	var mm=resetCursor(srcTextarea, currentPos+myGlobalVariable_copy.length); //Andy this is very important, andy
	
	if(navigator.userAgent.indexOf("Firefox") != -1 ) {
		//alert("firefox");
	//	setClipboard(myGlobalVariable_copy);
	}

	
}

function setClipboard(text) {  //firefox copy text into clipboard.
  var data = new DataTransfer();

  data.items.add("text/plain", text);
  navigator.clipboard.write(data).then(function() {
    /* success */ alert("copy text into firefox clipboard in success.");
  }, function() {
    /* failure */ alert("copy text into firefox clipboard failed.");
  });
}

function getSelectedText(el) {  //used for service of myFunctioncopy() by Andy 02-2019 works
    if (typeof el.selectionStart == "number") {
        return el.value.slice(el.selectionStart, el.selectionEnd);
    } else if (typeof document.selection != "undefined") {
        var range = document.selection.createRange();
        if (range.parentElement() == el) {
            return range.text;
        }
    }
    return "";
}

function myFunctionpaste(e) {  //attention e is very important.
		//var clipboardData, pastedData;
//var clipboardText = clipboardData.getData('Text');
//alert(clipboardText);
/*e = jQuery.Event("keydown");
fake = $.extend({}, e, {which: 86, ctrlKey: true});
$("text_area").trigger(fake);*/

/**var e = jQuery.Event("keydown");
e.which = 86; // m code value
e.ctrlKey = true; // Alt key pressed
$("#text_area").trigger(e);*/
 //var e = jQuery.Event("keydown");
 // e.which = 86;       // # F1 code value
 // e.ctrlkey = true;     // control key pressed
 // $(document).trigger(e);// trigger event on document
  
  //var clipboarddata =  window.event.clipboardData.getData('text'); 

 // alert(clipboarddata);
  var x=String.fromCharCode(556);
 // alert(x);
document.getElementById("edit_area").focus();
	y=keyprocessing(x);
	
	document.getElementById("edit_area").click();
	
}




function myFunctionclear() {
    var x = document.getElementById("myBtn_clear").value;
	//alert(x);
	    document.getElementById("edit_area").value = "";
		clear_all();
		document.getElementById("edit_area").focus();
	//y=keyprocessing(x);
}

//*******************************used as to fulfill the function of Backspace type delete button*******************************************
function getCaret(el) {

    if (el.selectionStart) {
        return el.selectionStart;
    } else if (document.selection) {
        el.focus();

        var r = document.selection.createRange();
        if (r == null) {
            return 0;
        }

        var re = el.createTextRange();
		
            rc = re.duplicate();
        //re.moveToBookmark(r.getBookmark());
        rc.setEndPoint('EndToStart', re);

        return rc.text.length;
    }
    return 0;
}

function resetCursor(txtElement, currentPos) { 
    if (txtElement.setSelectionRange) { 
        txtElement.focus(); 
        txtElement.setSelectionRange(currentPos, currentPos); 
			//alert("xx1");
    } else if (txtElement.createTextRange) { 
        var range = txtElement.createTextRange();  
        range.moveStart('character', currentPos); 
        range.select(); 
			//alert("xx2");
    } 
}

function Backspace() {
    var textarea = document.getElementById('edit_area');
    var currentPos = getCaret(textarea); 
  //   alert(currentPos);
    //var text = $(textarea).text();
	var text = textarea.value;
	//alert(text);

    var backSpace = text.substr(0, currentPos-1) + text.substr(currentPos, text.length);

    //$(textarea).text(backSpace);
	textarea.value=backSpace;
	//alert("middle");
    
    var mm=resetCursor(textarea, currentPos-1);
}
//**************************************************************************
//**************************used as to fulfill the function of delete type delete button************************************************
function getCaret(el) {

    if (el.selectionStart) {
        return el.selectionStart;
    } else if (document.selection) {
        el.focus();

        var r = document.selection.createRange();
        if (r == null) {
            return 0;
        }

        var re = el.createTextRange();
		
            rc = re.duplicate();
        //re.moveToBookmark(r.getBookmark());
        rc.setEndPoint('EndToStart', re);

        return rc.text.length;
    }
    return 0;
}

/*function resetCursor(txtElement, currentPos) { 
    if (txtElement.setSelectionRange) { 
        txtElement.focus(); 
        txtElement.setSelectionRange(currentPos, currentPos); 
		
    } else if (txtElement.createTextRange) { 
        var range = txtElement.createTextRange();  
        range.moveStart('character', currentPos); 
        range.select(); 
			
    } 
}*/
function Deletex(){
  var x=String.fromCharCode(555);
 // alert(x);
	document.getElementById("edit_area").focus();
	y=keyprocessing(x);
}
function Delete() {
    var textarea = document.getElementById('edit_area');
    var currentPos = getCaret(textarea); 
  //   alert(currentPos);
    //var text = $(textarea).text();
	var text = textarea.value;
	//alert(text);

    var contentAfterDelete = text.substr(0, currentPos) + text.substr(currentPos+1, text.length);

    //$(textarea).text(backSpace);
	textarea.value=contentAfterDelete;
	//alert("middle");
    
    var mm=resetCursor(textarea, currentPos);
}
//**************************************************************************










var is_upper=false;

var toggle=document.getElementById('myBtn_caseChange');

function update() {
	toggle.value = is_upper ? '\u21E9' : '\u21E7';
	for (var c = 1; c <= 26; ++c) {
      var lowerCase = String.fromCharCode(c+96);
      var upperCase = String.fromCharCode(c+64);
      var el = document.getElementById('myBtn_' + lowerCase);
      if (!el) continue;  //if el failed to get the one of 26 alphabet button, go back to execute for loop and neglect the command below.
      el.value = is_upper ? upperCase : lowerCase;  //if 26 buttons exists, give all buttons uppercase value or lower case value
    } 

}

toggle.addEventListener('click', function() {
    is_upper = !is_upper; // flip the case
    update();             // update the buttons
  });





</script>
    <script>
      ['textarea'].forEach(function (selector) {
        var element = document.querySelector(selector);
        var fontSize = getComputedStyle(element).getPropertyValue('font-size');

        var rect = document.createElement('div');
        document.body.appendChild(rect);
        rect.style.position = 'absolute';
        rect.style.backgroundColor = 'red';
        rect.style.height = fontSize;
        rect.style.width = '1px';

        ['keyup', 'keydown', 'keypress', 'click', 'scroll', ].forEach(function (event) {
         element.addEventListener(event, update);
        });

        function update() {
          // Set `debug` to true in order to see the mirror div. Default false.
          var coordinates = getCaretCoordinates(element, element.selectionEnd, { debug: false });
          console.log('(top, left, height) = (%s, %s, %s)', coordinates.top, coordinates.left, coordinates.height);
          rect.style.top = element.offsetTop
            - element.scrollTop
            + coordinates.top
            + 'px';
          rect.style.left = element.offsetLeft
            - element.scrollLeft
            + coordinates.left
            + 'px';
        }
      });
    </script>
	
	
	
	<script>
	
	</script>
  </body>
</html>
